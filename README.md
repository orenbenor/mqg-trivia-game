# משחק טריוויה - התנועה לאיכות השלטון

משחק טריוויה חינוכי בעברית (RTL), עם דגש על פעילות והישגים עדכניים של התנועה.

## הפעלה

1. פתחו את הקובץ `index.html` בדפדפן.
2. במסך הבית בחרו `משחק מהיר` או `כניסת מנהל`.
3. בכניסת מנהל מתחברים עם משתמשים שנוצרו ב-Backend.
4. מתוך לוח המנהל ניתן ליצור מנהלים נוספים עם שם משתמש וסיסמה.

## פריסה ציבורית (כל אחד יכול לשחק מכל מקום)

### אפשרות מומלצת: GitHub Pages אוטומטי

הפרויקט כבר כולל workflow מוכן לפריסה אוטומטית:
`/.github/workflows/deploy-mqg-trivia.yml`

מה צריך לעשות פעם אחת:

1. להעלות את הריפו ל-GitHub (branch `main`).
2. ב-Repository Settings > Pages לבחור `GitHub Actions` כמקור פריסה.
3. לבצע `push` לתיקייה `mqg-trivia-game`.

מרגע זה, כל שינוי ב-`mqg-trivia-game` יעלה אוטומטית לאוויר.

### אפשרויות נוספות

- `Render`: יש קובץ `render.yaml` מוכן (frontend + backend). מדריך: `DEPLOY_RENDER.md`.
- `Netlify`: יש קובץ `netlify.toml` מוכן.
- `Vercel`: יש קובץ `vercel.json` מוכן.

## בניית חבילת הפצה (dist)

הפרויקט כולל סקריפט לבניית חבילת deploy סטטית:

```bash
cd mqg-trivia-game
npm run build
```

התוצר יופיע בתיקייה:
`mqg-trivia-game/dist`

## סנכרון אמיתי בין מנהלים (Backend בענן)

הפרויקט כולל Backend מלא בתיקייה:
`mqg-trivia-game/backend`

מה זה נותן:

- התחברות מנהלים עם שם משתמש+סיסמה
- יצירה/מחיקה של מנהלים
- סנכרון נתונים בין כל המכשירים (לוח מנהל, טיוטות, מאגר שאלות, סטטיסטיקות וכו')

### הפעלה מקומית מהירה

```bash
cd mqg-trivia-game/backend
npm install
npm start
```

Backend יעלה כברירת מחדל ב:
`http://localhost:8787`

### חיבור ה-Frontend ל-Backend

עדכן את הקובץ:
`mqg-trivia-game/config.js`

```js
window.MQG_BACKEND_CONFIG = {
  enabled: true,
  baseUrl: "https://mqg-trivia-backend.onrender.com",
  syncIntervalMs: 15000,
  publicWriteKey: "a80732e8237d1cdb0e35c0ed1c4e046e2381247a0e9eaadb",
  allowInsecureLocalFallback: false,
};
```

אם אתה עובר לדומיין backend אחר, עדכן את `baseUrl` בהתאם.
`publicWriteKey` מאפשר לשמור תוצאות משחק (attempts) גם ממשתמשים שאינם מנהלים מחוברים.
משתמש המנהל הראשוני ב-Backend מוגדר דרך משתני הסביבה:
- `DEFAULT_ADMIN_USERNAME`
- `DEFAULT_ADMIN_PASSWORD`
- `MIN_PASSWORD_LENGTH` (ברירת מחדל: 8)

## מה כולל המשחק

- כניסה מהירה לשחקן: הזנת שם, משחק עם ניקוד וסיכום טעויות.
- נוסף גם מצב `משחק מהיר עונתי` עם שאלות מאוקטובר 2025 ומעלה בלבד.
- כניסת מנהל: מעקב תוצאות שחקנים, הוספת פעילויות, יצירת טיוטות שאלות ואישורן למאגר.
- כניסת מנהל עם שם משתמש וסיסמה + ניהול משתמשי מנהל נוספים מתוך הפאנל.
- המנהל הראשי יכול לעדכן לעצמו סיסמה בכל רגע מתוך לוח המנהל (`סיסמה נוכחית` + `סיסמה חדשה`).
- למנהל יש מעבר ייעודי ל`מאגר השאלות` לעריכה/הסרה/שחזור, במקום הצגה קבועה במסך הראשי.
- במאגר השאלות יש `Audit לפני פרסום` בלחיצה אחת: בדיקת חריגות שאלה-שאלה (ניסוח, תשובה, מסיחים, הסבר ומקור) עם סיווג חומרה.
- במסך המשחק נוספה פעולה ציבורית `אתחל וערבב שאלות מחדש` לאיפוס מחזורי השאלות בכל רגע (ללא כניסת מנהל).
- מדד למידה לפי נושא במנהל: דיוק, נפילות, פקיעות זמן ומדד חיזוק לכל קטגוריה.
- צ'קליסט איכות מחייב לפני אישור טיוטה (כולל חסימה לשאלות "תאריך בלבד").
- מודול טקסט ארוך: העלאת/הדבקת טקסט, כפתור `קרא והבן את הכל`, יצירת 5/10/15 טיוטות שאלות מהטקסט בלבד, ואישור שאלה-שאלה או אישור מרוכז בלחיצה אחת.
- כל שאלה כוללת הסבר לימודי וקישור מקור (כאשר קיים).
- לאחר תשובה שגויה מוצג הסבר קצר למה התשובה לא נכונה; ניתן ללחוץ על `הסבר יותר לעומק` להצגת פירוט מלא.
- וריאציות שאלה שומרות על סט תשובות ענייני ורלוונטי לאותה שאלה (ללא ערבוב מסיחים מנושאים אחרים).
- קישורי `מקור` משתמשים בפתיחה ממוקדת לטקסט הרלוונטי (כולל ניסיון לאיתור עמוד מדויק אוטומטי).
- קיימת שכבת `source registry` לשאלות הבסיס (`b01..b20`) לצורך איתור מקור יציב ומדויק יותר.
- הלוגו והבאנרים במשחק נשענים על נכסים רשמיים של אתר התנועה (עם fallback פנימי אם אין טעינה).
- אפשרות `משחק חדש בכל שלב` מכל מסך.
- טיימר לכל שאלה: אחרי 15 שניות מופיע מצב אזהרה, ואחרי 30 שניות השאלה נפסלת אוטומטית.
- מוזיקת רקע בלופ בעוצמה חלשה עם שליטה `+ / - / השתק` (לא מוצג במסכי מנהל).
- מנגנון בחירה מוקשח: שאלות ומשפחות שאלות מסובבות במחזורים כדי לצמצם חזרות עד כמעט אפס לאורך רצף משחקים.
- תמיכה ב-PWA: `manifest`, `service worker`, ואייקון אפליקציה להתקנה במסך הבית.

## תוכן ומקורות

- מאגר הבסיס מוגבל ל-2025 ומעלה.
- מאגר בסיס מורחב אוטומטית לכ-500 שאלות לימודיות.
- תוכן מוקדם יותר יכול להיכנס רק כהישג שמנהל מוסיף ומאשר.
- תאריך איסוף המידע האחרון: 6 בפברואר 2026.
